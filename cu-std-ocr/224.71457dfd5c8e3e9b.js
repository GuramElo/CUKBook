(self.webpackChunkcu_std_ocr=self.webpackChunkcu_std_ocr||[]).push([[224],{5224:(_,y,a)=>{a.r(y);var g=a(8782),v=a(7849),e=a(3083);let d=(()=>{class o{constructor(){this.title="cu-std-ocr"}static#e=this.\u0275fac=function(t){return new(t||o)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-root"]],standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:1,vars:0,template:function(t,n){1&t&&e.\u0275\u0275element(0,"router-outlet")},dependencies:[v.RouterModule,v.RouterOutlet]})}return o})();var c=a(467),u=a(5003),s=a(5592);const h=["videoElement"],m=["canvasElement"],C={providers:[(0,v.provideRouter)([{path:"",component:d,children:[{path:"",component:(()=>{class o{constructor(){var r=this;(0,c.A)(function*(){r.tesseractWorker=yield u.createWorker("eng",u.OEM.DEFAULT,{logger:t=>console.log(t)})})()}ngOnInit(){}ngAfterViewInit(){this.setupCamera(),setTimeout(()=>{setInterval(()=>{this.captureScreenshot().then()},1e3)},5e3)}setupCamera(){var r=this;return(0,c.A)(function*(){const t=r.videoElement.nativeElement;try{const n=yield navigator.mediaDevices.getUserMedia({video:!0});t.srcObject=n}catch(n){console.error("Error accessing the camera:",n)}})()}captureScreenshot(){var r=this;return(0,c.A)(function*(){const t=r.videoElement.nativeElement,n=r.canvasElement.nativeElement,l=n.getContext("2d");n.width=t.videoWidth,n.height=t.videoHeight,l.drawImage(t,0,0,n.width,n.height);const f=s.imread(n);s.cvtColor(f,f,s.COLOR_RGBA2GRAY),s.imshow(n,f),f.delete();const w=n.toDataURL(),E=yield r.recognizeText(w);console.log("Recognized Text:",E)})()}recognizeText(r){var t=this;return(0,c.A)(function*(){yield t.tesseractWorker.load();const{data:{text:n}}=yield t.tesseractWorker.recognize(r);return n})()}ngOnDestroy(){this.tesseractWorker.terminate()}static#e=this.\u0275fac=function(t){return new(t||o)};static#t=this.\u0275cmp=e.\u0275\u0275defineComponent({type:o,selectors:[["app-camera-ocr"]],viewQuery:function(t,n){if(1&t&&(e.\u0275\u0275viewQuery(h,5),e.\u0275\u0275viewQuery(m,5)),2&t){let l;e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.videoElement=l.first),e.\u0275\u0275queryRefresh(l=e.\u0275\u0275loadQuery())&&(n.canvasElement=l.first)}},standalone:!0,features:[e.\u0275\u0275StandaloneFeature],decls:9,vars:0,consts:[["videoElement",""],["canvasElement",""],["width","640","height","480","autoplay","","muted",""],[3,"click"],["width","640","height","480",2,"display","none"]],template:function(t,n){if(1&t){const l=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div")(1,"h2"),e.\u0275\u0275text(2,"Screenshot Recognition Component"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"video",2,0),e.\u0275\u0275elementStart(5,"button",3),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(l),e.\u0275\u0275resetView(n.captureScreenshot())}),e.\u0275\u0275text(6,"Capture Screenshot"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"canvas",4,1),e.\u0275\u0275elementEnd()}}})}return o})()}]}])]};(0,g.bootstrapApplication)(d,C).catch(o=>console.error(o))},467:(_,y,a)=>{function g(e,d,c,u,s,h,m){try{var p=e[h](m),i=p.value}catch(C){return void c(C)}p.done?d(i):Promise.resolve(i).then(u,s)}function v(e){return function(){var d=this,c=arguments;return new Promise(function(u,s){var h=e.apply(d,c);function m(i){g(h,u,s,m,p,"next",i)}function p(i){g(h,u,s,m,p,"throw",i)}m(void 0)})}}a.d(y,{A:()=>v})}}]);